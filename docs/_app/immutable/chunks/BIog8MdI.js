const K=!1;function R(e){var t,i,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var n=e.length;for(t=0;t<n;t++)e[t]&&(i=R(e[t]))&&(r&&(r+=" "),r+=i)}else for(i in e)e[i]&&(r&&(r+=" "),r+=i);return r}function Q(){for(var e,t,i=0,r="",n=arguments.length;i<n;i++)(e=arguments[i])&&(t=R(e))&&(r&&(r+=" "),r+=t);return r}let $=-1;const m=e=>{addEventListener("pageshow",(t=>{t.persisted&&($=t.timeStamp,e(t))}),!0)},l=(e,t,i,r)=>{let n,s;return a=>{t.value>=0&&(a||r)&&(s=t.value-(n??0),(s||n===void 0)&&(n=t.value,t.delta=s,t.rating=((o,u)=>o>u[1]?"poor":o>u[0]?"needs-improvement":"good")(t.value,i),e(t)))}},A=e=>{requestAnimationFrame((()=>requestAnimationFrame((()=>e()))))},S=()=>{const e=performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},f=()=>S()?.activationStart??0,d=(e,t=-1)=>{const i=S();let r="navigate";return $>=0?r="back-forward-cache":i&&(document.prerendering||f()>0?r="prerender":document.wasDiscarded?r="restore":i.type&&(r=i.type.replace(/_/g,"-"))),{name:e,value:t,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:r}},b=new WeakMap;function w(e,t){return b.get(e)||b.set(e,new t),b.get(e)}class j{t;i=0;o=[];h(t){if(t.hadRecentInput)return;const i=this.o[0],r=this.o.at(-1);this.i&&i&&r&&t.startTime-r.startTime<1e3&&t.startTime-i.startTime<5e3?(this.i+=t.value,this.o.push(t)):(this.i=t.value,this.o=[t]),this.t?.(t)}}const v=(e,t,i={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver((n=>{Promise.resolve().then((()=>{t(n.getEntries())}))}));return r.observe({type:e,buffered:!0,...i}),r}}catch{}},I=e=>{let t=!1;return()=>{t||(e(),t=!0)}};let p=-1;const N=new Set,M=()=>document.visibilityState!=="hidden"||document.prerendering?1/0:0,P=e=>{if(document.visibilityState==="hidden"){if(e.type==="visibilitychange")for(const t of N)t();isFinite(p)||(p=e.type==="visibilitychange"?e.timeStamp:0,removeEventListener("prerenderingchange",P,!0))}},y=()=>{if(p<0){const e=f();p=(document.prerendering?void 0:globalThis.performance.getEntriesByType("visibility-state").filter((i=>i.name==="hidden"&&i.startTime>e))[0]?.startTime)??M(),addEventListener("visibilitychange",P,!0),addEventListener("prerenderingchange",P,!0),m((()=>{setTimeout((()=>{p=M()}))}))}return{get firstHiddenTime(){return p},onHidden(e){N.add(e)}}},T=e=>{document.prerendering?addEventListener("prerenderingchange",(()=>e()),!0):e()},k=[1800,3e3],V=(e,t={})=>{T((()=>{const i=y();let r,n=d("FCP");const s=v("paint",(a=>{for(const o of a)o.name==="first-contentful-paint"&&(s.disconnect(),o.startTime<i.firstHiddenTime&&(n.value=Math.max(o.startTime-f(),0),n.entries.push(o),r(!0)))}));s&&(r=l(e,n,k,t.reportAllChanges),m((a=>{n=d("FCP"),r=l(e,n,k,t.reportAllChanges),A((()=>{n.value=performance.now()-a.timeStamp,r(!0)}))})))}))},F=[.1,.25],U=(e,t={})=>{const i=y();V(I((()=>{let r,n=d("CLS",0);const s=w(t,j),a=u=>{for(const c of u)s.h(c);s.i>n.value&&(n.value=s.i,n.entries=s.o,r())},o=v("layout-shift",a);o&&(r=l(e,n,F,t.reportAllChanges),i.onHidden((()=>{a(o.takeRecords()),r(!0)})),m((()=>{s.i=0,n=d("CLS",0),r=l(e,n,F,t.reportAllChanges),A((()=>r()))})),setTimeout(r))})))};let O=0,C=1/0,g=0;const W=e=>{for(const t of e)t.interactionId&&(C=Math.min(C,t.interactionId),g=Math.max(g,t.interactionId),O=g?(g-C)/7+1:0)};let E;const x=()=>E?O:performance.interactionCount??0,z=()=>{"interactionCount"in performance||E||(E=v("event",W,{type:"event",buffered:!0,durationThreshold:0}))};let H=0;class G{u=[];l=new Map;m;p;v(){H=x(),this.u.length=0,this.l.clear()}L(){const t=Math.min(this.u.length-1,Math.floor((x()-H)/50));return this.u[t]}h(t){if(this.m?.(t),!t.interactionId&&t.entryType!=="first-input")return;const i=this.u.at(-1);let r=this.l.get(t.interactionId);if(r||this.u.length<10||t.duration>i.P){if(r?t.duration>r.P?(r.entries=[t],r.P=t.duration):t.duration===r.P&&t.startTime===r.entries[0].startTime&&r.entries.push(t):(r={id:t.interactionId,entries:[t],P:t.duration},this.l.set(r.id,r),this.u.push(r)),this.u.sort(((n,s)=>s.P-n.P)),this.u.length>10){const n=this.u.splice(10);for(const s of n)this.l.delete(s.id)}this.p?.(r)}}}const _=e=>{const t=globalThis.requestIdleCallback||setTimeout;document.visibilityState==="hidden"?e():(e=I(e),addEventListener("visibilitychange",e,{once:!0,capture:!0}),t((()=>{e(),removeEventListener("visibilitychange",e,{capture:!0})})))},B=[200,500],X=(e,t={})=>{if(!globalThis.PerformanceEventTiming||!("interactionId"in PerformanceEventTiming.prototype))return;const i=y();T((()=>{z();let r,n=d("INP");const s=w(t,G),a=u=>{_((()=>{for(const h of u)s.h(h);const c=s.L();c&&c.P!==n.value&&(n.value=c.P,n.entries=c.entries,r())}))},o=v("event",a,{durationThreshold:t.durationThreshold??40});r=l(e,n,B,t.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),i.onHidden((()=>{a(o.takeRecords()),r(!0)})),m((()=>{s.v(),n=d("INP"),r=l(e,n,B,t.reportAllChanges)})))}))};class J{m;h(t){this.m?.(t)}}const q=[2500,4e3],Y=(e,t={})=>{T((()=>{const i=y();let r,n=d("LCP");const s=w(t,J),a=u=>{t.reportAllChanges||(u=u.slice(-1));for(const c of u)s.h(c),c.startTime<i.firstHiddenTime&&(n.value=Math.max(c.startTime-f(),0),n.entries=[c],r())},o=v("largest-contentful-paint",a);if(o){r=l(e,n,q,t.reportAllChanges);const u=I((()=>{a(o.takeRecords()),o.disconnect(),r(!0)})),c=h=>{h.isTrusted&&(_(u),removeEventListener(h.type,c,{capture:!0}))};for(const h of["keydown","click","visibilitychange"])addEventListener(h,c,{capture:!0});m((h=>{n=d("LCP"),r=l(e,n,q,t.reportAllChanges),A((()=>{n.value=performance.now()-h.timeStamp,r(!0)}))}))}}))},D=[800,1800],L=e=>{document.prerendering?T((()=>L(e))):document.readyState!=="complete"?addEventListener("load",(()=>L(e)),!0):setTimeout(e)},Z=(e,t={})=>{let i=d("TTFB"),r=l(e,i,D,t.reportAllChanges);L((()=>{const n=S();n&&(i.value=Math.max(n.responseStart-f(),0),i.entries=[n],r(!0),m((()=>{i=d("TTFB",0),r=l(e,i,D,t.reportAllChanges),r(!0)})))}))};export{Z as $,K as D,V as E,U as L,X as S,Q as c,Y as x};
